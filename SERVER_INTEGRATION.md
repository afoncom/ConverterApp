# üèó Currency-Server Integration Guide

## üìã –ß—Ç–æ —Ç–∞–∫–æ–µ Currency-Server?

**Currency-Server** ‚Äî —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π REST API —Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Swift —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Vapor. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –¥–ª—è iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è CurrencyConverter.

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
- **–ó–∞–º–µ–Ω–∞ –º–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API
- **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–û–±—É—á–µ–Ω–∏–µ** —Ä–∞–±–æ—Ç–µ —Å —Å–µ—Ç–µ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** (iOS + Backend)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
CurrencyConverter/
‚îú‚îÄ‚îÄ CurrencyConverter/          # iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Frontend)
‚îÇ   ‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ Views/
‚îÇ   ‚îú‚îÄ‚îÄ ViewModels/
‚îÇ   ‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CurrencyService.swift    # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
‚îÇ   ‚îî‚îÄ‚îÄ Coordinators/
‚îú‚îÄ‚îÄ Backend/                    # Vapor —Å–µ—Ä–≤–µ—Ä (Backend)
‚îÇ   ‚îú‚îÄ‚îÄ Sources/CurrencyServer/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Models/Currency.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/CurrencyController.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes.swift
‚îÇ   ‚îú‚îÄ‚îÄ Package.swift
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ test_api_integration.swift  # –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É

### 1. –ó–∞–ø—É—Å–∫ Backend —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd Backend
swift build                    # –ü–µ—Ä–≤—ã–π —Ä–∞–∑ - —Å–±–æ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
swift run CurrencyServer serve --hostname localhost --port 8080
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[ NOTICE ] Server started on http://localhost:8080
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
curl http://localhost:8080/v1/getRates
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
[
  {
    "uuid": "...",
    "name": "USD",
    "rate": 1
  },
  {
    "uuid": "...",
    "name": "EUR", 
    "rate": 0.85
  }
  // ... –¥—Ä—É–≥–∏–µ –≤–∞–ª—é—Ç—ã
]
```

### 3. –ó–∞–ø—É—Å–∫ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ `CurrencyConverter.xcodeproj` –≤ Xcode
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (—à–∞–≥ 1)
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üîß API Endpoints

### GET /v1/getRates

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–ª—é—Ç —Å –∏—Ö –∫—É—Ä—Å–∞–º–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ USD.

**URL:** `http://localhost:8080/v1/getRates`

**Response:**
```json
[
  {
    "uuid": "77066D5C-CE5B-46D4-8D69-417F5A84C2C8",
    "name": "USD",
    "rate": 1.0
  },
  {
    "uuid": "0C67F0D1-4D2D-4608-A0E2-8D6E1B81FC00",
    "name": "EUR",
    "rate": 0.85
  }
]
```

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å iOS

### CurrencyService –æ–±–Ω–æ–≤–ª–µ–Ω

–¢–µ–ø–µ—Ä—å `CurrencyService` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

#### 1. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
```swift
let rates = CurrencyService.shared.getExchangeRates()
```

#### 2. API –¥–∞–Ω–Ω—ã–µ (–Ω–æ–≤–æ–µ)
```swift
CurrencyService.shared.getExchangeRatesFromAPI { result in
    switch result {
    case .success(let rates):
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
        DispatchQueue.main.async {
            self.updateUI(with: rates)
        }
    case .failure(let error):
        print("–û—à–∏–±–∫–∞ API: \(error.localizedDescription)")
    }
}
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞–ª—é—Ç—ã

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –≤–∞–ª—é—Ç—ã:

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –°–∏–º–≤–æ–ª | –ö—É—Ä—Å (–∫ USD) |
|-----|----------|---------|-------------|
| USD | US Dollar | $ | 1.0 |
| EUR | Euro | ‚Ç¨ | 0.85 |
| GBP | British Pound | ¬£ | 0.73 |
| JPY | Japanese Yen | ¬• | 110.0 |
| RUB | Russian Ruble | ‚ÇΩ | 75.0 |
| CHF | Swiss Franc | CHF | 0.92 |
| CAD | Canadian Dollar | C$ | 1.25 |
| AUD | Australian Dollar | A$ | 1.35 |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
swift test_api_integration.swift
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
=== –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Currency-Server API ===
üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Currency-Server API...
üì° –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (579 –±–∞–π—Ç)
‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ 8 –≤–∞–ª—é—Ç:
   üí∞ USD: 1.0
   üí∞ EUR: 0.85
   üí∞ GBP: 0.73
   ...
üéâ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
```

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
lsof -i :8080

# –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
pkill -f CurrencyServer
```

### 2. iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`curl http://localhost:8080/v1/getRates`)
- –í `Info.plist` iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:

```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
</dict>
```

### 3. –û—à–∏–±–∫–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JSON

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
curl -v http://localhost:8080/v1/getRates | jq .
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ViewModel** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API –¥–∞–Ω–Ω—ã—Ö
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏** –≤ UI
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏** –≤ UI
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤** –ø–æ —Ç–∞–π–º–µ—Ä—É

## üìö –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTP GET     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   iOS App       ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> ‚îÇ  Currency-Server ‚îÇ
‚îÇ  (Frontend)     ‚îÇ                 ‚îÇ   (Backend)      ‚îÇ
‚îÇ                 ‚îÇ    JSON API     ‚îÇ                  ‚îÇ
‚îÇ CurrencyService ‚îÇ <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ CurrencyController‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:
- **iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π MVVM –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- **REST API —Å–µ—Ä–≤–µ—Ä** –Ω–∞ Swift/Vapor  
- **–°–µ—Ç–µ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –º–µ–∂–¥—É Frontend –∏ Backend
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–≠—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π! üöÄ